const input = `\\\\.......\\.............../-........|......................-......../..................../......./....|........
\\.................\\....\\...../........|........|....../.\\....-....-..................|../...|...\\./...........
../...-.....................\\./-.....-.........................../...........\\|......\\......--............/...
.......|........\\...\\.........../|...../.........../...../..../...../.................\\.././..................
...........\\|..........-.................|.|.............|.............|....|..|-...........-..-......./......
.............................-../.......\\.........\\..........................\\.......|....|.........-.........
..................../......................-......-...................................../...\\...........|.....
..|..............................\\......................|....-................................................
..........\\........./.........................|.................../....-|...../............./.....|.........//
.-./../.................|....................|................../................\\....|..|..../|.......-./....
................/........................\\...|.....-.....-...-........\\.............../.......-|-./...........
.......\\|.........|..-.........................|../...../.\\.../............../.........|.....|../........\\....
..............-./.............../...........................|....-....-..../......\\....-.......\\........./....
...............././.-.......|/...................../..-..-..\\...\\.-.-..-................../...................
..-......../.-.......\\..............................\\/....................................-...................
.........................................\\....\\.........\\.-......-.|.....\\.......................\\............
./.........\\.-.-/.............................................|/......|........-\\-............................
-.....................|.........................|..\\..........|..--....\\..\\........./.........................
...............\\............../............\\.........................-...............|................/....\\..
.-.........-...........-|......../...............|.........-...-...|....................-.....................
.\\./...............|......\\..........-..\\.................-...........................././../.-............/.-
...-/..............-..|........................|..../.......-..........-/...............\\............../......
|..........-\\..........\\......../.................\\.|.......-............../.......|.................../......
.....\\...............|................/........\\.....\\..................-.../........................./.......
..............................-..\\.../.........-..-........-.......-.............-......................|.../.
.........../../.|.......-/-.|.|...-...............................\\\\./....|................/.\\................
.........-..............................|.||......................./........\\..-..../.................|...../.
.............\\...../\\.............../...-......../.....\\.....................................-/........\\..|..\\
...............-.-../.-./....|.......\\................/...|................................................|.|
........-.................-.........................-................\\......|.....\\......-........-...........
|../.......|......\\............|....../..|.......|../.........................................................
....................................../..\\....\\\\.............\\...................||/.../.../........\\.........
............./..../....-...|........../-.............\\......................................\\/........-..-....
.................\\\\...............|\\\\...........\\.........../......-.......-............\\..............-..-..\\
...|..../..|../..|........./.../.-..............................\\.........-........................|.\\....||..
......................./..|....-..............................-........................././../................
../.\\.............//.\\.|..................-.....\\...........|..././............/.....................-........
|........|.......................|.......................\\...-......\\.......|./-.\\...........................|
\\..\\......-.......|................|...............................-........\\....-............................
./..........................................................\\..............|-......./......................|..
.|...|..........|.\\...-./../....|........\\...................|......\\.|.|......\\...........-.-........./.../-.
................................||.\\....................|.|\\-............../..../.........\\................./.
.......|\\.....................................\\........\\........../...|......-.........../....................
......................\\...-.-..|.................................../-..-./...-......................\\......./.
..\\..................../..../-.........-.................................................../-..\\...-..........
...//....-......../..-.................\\...-........\\.../-../.\\.....-\\............../.................../.....
........./.............................................../|..|....../....................../..................
............/..........\\..-...|....|.-\\\\.....|..............|.................-.....|.........................
...-..-................../......-................./.../................\\......\\|.......-./.\\.....|............
.|..-...........-......\\....-...-.........................\\.............\\......|..........-|..................
...........-..............\\.....\\........-.....|.......\\.....................................-..\\.....\\./.....
.|....\\.....|......./...|/.....\\.......................|.................\\................|....-............/.
........./....|...................................|..|.............../../......./.............................
...\\|..-./....../........-.\\................./..|.......|.................-....................\\..............
...................\\..|..-..-..................-......||.....\\..\\............\\./............................-.
.......-........./...\\.....|...................../.................\\.\\/.......\\....|..........................
.....././................-............/.................../.......-............\\.....|.|./...|..\\.............
...................||.......\\.|.........-........................|...\\.../.............\\..-..|............|...
......\\...../.........|........|..|./..\\....-...........................|..|..-...-..................../..../.
............................-../..............|.........|..............|.........-......-.....\\...............
..............|............/........./................\\........................../...........|................
..-.............-.|-......................-.|........././..././..........\\...-..\\........|....................
...../.......-............-........-........../.-.....--...................\\..-......\\..................|.....
....................\\/|.......-...............................................-....\\.............\\....|...|...
...../.........../......\\...........-..|............/.|....-........../....../...................\\.|........-.
..........\\...................-........|....|..........|....--.........................-....../...\\..../....|\\
......|................|..-................./......-.-.....-......./.../.................../..................
................../......\\..|....-\\.....................................\\.-............../.-....|...-..../....
............-./...|-.............-.....|......|.....\\-............-.............\\-..........................|.
............-............../....\\./............................/.....|.-............/-......../...............
............................./............/...............................-......\\....-./../......-.........\\.
..............................|\\.\\.....\\...-.|../-.-..../.......................\\../-...........-.............
...-|......|......-...|.........................\\..--....-./................\\|.-..........\\...........|.|.-...
...-............./../........./..-../.......\\...\\..........\\...................../....-.......-...-...........
....\\........\\................-.....-.........................|.........-.........\\........-......../..-......
..........................-...............|./..-../..........|./........................|\\..............-./...
................./.|...............................................-.................\\./|....|................
.\\.\\.............|........-\\....-../....|....-......./...........\\..-...../............/..............|.......
.\\.............\\.........../....../.../.....................|.......................-\\\\...../.................
|./..-....../....|\\..\\..||............../...................../...........................................-...
..\\.......\\......\\.../......../-.....-.-.............-.......................|....|../......|.|..\\............
..\\..|.....|........\\......................\\.......................|-...|....|....................../.......-.
.....\\..............\\.........\\....................../........|.|.......\\...............-..--..|..............
..-/............-....-../.|.......-.../..../..........\\......../.....................\\.-.................\\..|.
....................|....|..........\\..........|.......................................\\-..\\..................
........................../............................\\.....|.............-..--......................|.......
....-......../...................-....\\..../......\\\\.|..|.................................|...................
.-......\\..-............../..........................-.../-....|/....\\................-.......|....\\...|......
...../..../..\\.........-.........-......./.|.....|..../..\\\\...............\\..|.../.....-........./.|\\.\\....../
......./.......\\............../........-.......\\........./..-........../........-...|....../-..........\\....\\.
......................\\.......\\/\\...........|..\\..\\..........-........../................-............-.......
.......-.............\\......|................-../......|......-.................../.......\\\\..................
.........../..............\\........|..\\.......|....../..../.........-............................|............
..../.....|...../.....-/..........-...................-../.................-..-.|............../.-....../.....
...............-...|.....|||......................-..|-.........\\...\\/.\\.............../.../..................
.............|.......-.............................../..|.\\../.........\\/...|........|.\\...\\-...../.....-.....
....\\.........\\......................................................|../-........................./..........
...................../........................./........-..-....................../.\\...............|.........
..............|....../.....\\...................|...\\\\.....|.......|..............\\........-......|./..........
........-.....|...|....../................-.......\\-.|.........|...../.............../\\.-...........|....\\....
-....................\\......../.......-.-.././.................\\.../................|.../.....................
..............|-................/.....................|...................../.|.-|..........-./....|..-.......
..............|..|....|..........-.................-/\\.......|-.............|.........../....../...........-..
../............................................................/..........\\\\.....\\\\...........................
...|..-\\......................................-.//...\\./...............-.......//................/............
.......\\.........................|.........../....../...............-......-.....|.....................|......
...............|-..|.-......-....\\..../........\\.....-.-................\\..\\.-...\\..../....-../.........-|....
.|-..........|\\............/............./..|........|........../.....\\........./......../..........|.........
..............|.............................../|..\\..|................\\......|...../......../..........\\....\\|
.../....|....../............................/..........\\...\\..|...-\\.............../..-.\\/...-....|.......-...`;

const coordinateMap = {};

function coordinate(x, y) {
    coordinateMap[x] ??= {};
    return coordinateMap[x][y] ??= [x, y];
}

const edgeMap = new Map();

function edge(p1, p2) {
    if (!edgeMap.has(p1)) edgeMap.set(p1, new Map());
    const inner = edgeMap.get(p1);
    if (!inner.has(p2)) inner.set(p2, [p1, p2]);
    return inner.get(p2);
}

function main() {
    const map = new Map();
    input.split('\n').forEach((v, y) => v.split('').forEach((c, x) => map.set(coordinate(x, y), c)));
    const energized = new Set();
    const edgeSet = new Set();
    
    search(map, energized, edgeSet, coordinate(-1, 0), 1);

    return energized.size;
}

// dir: 0^ 1> 2v 3<
function search(map, energized, edgeSet, point, dir) {
    const start = point;
    while (true) {
        point = step(point, dir);
        const obj = map.get(point);
        if (obj === '.') {
            energized.add(point);
        } else {
            if (edgeSet.has(edge(start, point))) return;
            edgeSet.add(edge(start, point));
            if (!obj) return;
            energized.add(point);
            switch (dir) {
                case 0: switch (obj) {
                    case '|': {
                        search(map, energized, edgeSet, point, 0);
                        return;
                    }

                    case '/': {
                        search(map, energized, edgeSet, point, 1);
                        return;
                    }

                    case '\\': {
                        search(map, energized, edgeSet, point, 3);
                        return;
                    }

                    case '-': {
                        search(map, energized, edgeSet, point, 1);
                        search(map, energized, edgeSet, point, 3);
                        return;
                    }
                }
                
                case 1: switch (obj) {
                    case '|': {
                        search(map, energized, edgeSet, point, 0);
                        search(map, energized, edgeSet, point, 2);
                        return;
                    }

                    case '/': {
                        search(map, energized, edgeSet, point, 0);
                        return;
                    }

                    case '\\': {
                        search(map, energized, edgeSet, point, 2);
                        return;
                    }

                    case '-': {
                        search(map, energized, edgeSet, point, 1);
                        return;
                    }
                }

                case 2: switch (obj) {
                    case '|': {
                        search(map, energized, edgeSet, point, 2);
                        return;
                    }

                    case '/': {
                        search(map, energized, edgeSet, point, 3);
                        return;
                    }

                    case '\\': {
                        search(map, energized, edgeSet, point, 1);
                        return;
                    }

                    case '-': {
                        search(map, energized, edgeSet, point, 1);
                        search(map, energized, edgeSet, point, 3);
                        return;
                    }
                }

                case 3: switch (obj) {
                    case '|': {
                        search(map, energized, edgeSet, point, 0);
                        search(map, energized, edgeSet, point, 2);
                        return;
                    }

                    case '/': {
                        search(map, energized, edgeSet, point, 2);
                        return;
                    }

                    case '\\': {
                        search(map, energized, edgeSet, point, 0);
                        return;
                    }

                    case '-': {
                        search(map, energized, edgeSet, point, 3);
                        return;
                    }
                }
            }
        }
    }
}

function step([x, y], dir) {
    switch (dir) {
        case 0: return coordinate(x, y - 1);
        case 1: return coordinate(x + 1, y);
        case 2: return coordinate(x, y + 1);
        case 3: return coordinate(x - 1, y);
    }
}

if (process.argv.includes('--bench')) {
    let sum = 0;
    for (let i = 0; i < 10; i++) {
        const start = performance.now();
        main();
        sum += performance.now() - start;
    }
    console.log(`${(sum / 10).toFixed(3)}ms`);
} else {
    console.log(main());
}